<!DOCTYPE html>

<ul class="nav nav-tabs centered" style="position: relative; z-index:2;">
    <li class="nav-item">
        <a class="nav-link" ng-click="changeTab(1)" ng-class="{ active: tab==1 }" style="cursor:pointer"><i class="fa fa-info" aria-hidden="true"></i>&nbsp;&nbsp;{{ 'GENERAL' | translate }}</a>
    </li>
    <li class="nav-item">
        <a class="nav-link" ng-click="changeTab(2)" ng-class="{ active: tab==2 }" style="cursor:pointer"><i class="fa fa-area-chart" aria-hidden="true"></i>&nbsp;&nbsp;{{ 'TIMESERIES' | translate }}</a>
    </li>
    <li class="nav-item">
        <a class="nav-link" ng-click="changeTab(3)" ng-class="{ active: tab==3 }" style="cursor:pointer"><i class="fa fa-bolt" aria-hidden="true"></i>&nbsp;&nbsp;{{ 'REAL_TIME_DATA' | translate }}</a>
    </li>
</ul>

<div style="float:right; position: relative; z-index:2; margin-top:-35px; margin-right:1px;" ng-if="authenticated_user && authenticated_user.thresholds.length > 0 ">

    <!-- Subscribe-Button -->
    <button class="btn btn-sm btn-primary" ng-if="!currentSubscription" ng-click="subscribe()">
        <i class="fa fa-rss-square" aria-hidden="true"></i>&nbsp;&nbsp;{{ 'SUBSCRIBE' | translate }}
    </button>

    <!-- Subscribed-Button and Unsubscribe-Button-->
    <div class="dropdown closed" ng-if="currentSubscription">
        <button class="btn btn-sm btn-success dropdown-toggle" type="button" id="dropdownButton" data-toggle="dropdown" aria-haspopup="false" aria-expanded="false" style="cursor: pointer;">
            <i class="fa fa-bell" aria-hidden="true"></i>&nbsp;&nbsp;{{ 'SUBSCRIBED' | translate }}
        </button>
        <div class="dropdown-menu dropdown-menu-right" aria-labelledby="dropdownButton">
            <a class="dropdown-item" ng-click="unsubscribe()" style="cursor: pointer;">
                {{ 'UNSUBSCRIBE' | translate }}
            </a>
        </div>
    </div>

</div>

<!-- Tabs -->
<div class="card" style="margin-top: -1px; position: relative; z-index:1; padding:20px;">

    <div ng-if="!sensor">
        <br>
        <br>
        <center><i class="fa fa-spinner fa-pulse"></i></center>
        <br>
        <br>
    </div>

    <!-- Header -->
    <div class="row">

        <!-- Sensor Description -->
        <div class="col-md-5">
            <div class="sensor-title" ng-if="sensor">
                <h1 class="display-4 text-primary" style="font-size: 18pt;">
                    <i class="fa fa-cube"></i> {{sensor.description}}
                </h1>

                <span style="font-size: 11pt; font-weight:bold;">{{ 'DEVICE_ID' | translate }}</span>
                <kbd style="font-size: 8pt;">{{sensor.device_id}}</kbd>

            </div>
        </div>
        <div class="col-md-7" ng-if="sensor">

            <div class="row">
                <div class="col-xs-5">

                    <!-- Latest Measurement -->
                    <table class="statistics">
                        <tr>
                            <td colspan="2" class="middle">
                                <span class="display-4 text-primary" style="font-size: 12pt;">
                                    {{ 'LAST_WATER_LEVEL' | translate }}
                                </span>
                            </td>
                        </tr>
                        <tr>
                            <th>
                                {{ 'WATER_LEVEL' | translate }}
                            </th>
                            <td>
                                <span class="label label-primary" style="font-size: 11pt;">
                                    {{sensor.latest_measurement.water_level | water_level }}
                                </span>
                            </td>
                        </tr>
                        <tr>
                            <th>
                                {{ 'MEASURED' | translate }}
                            </th>
                            <td>
                                <small>{{sensor.latest_measurement.measurement_timestamp | time }}</small>
                            </td>
                        </tr>
                    </table>
                </div>
                <div class="col-xs-7">

                    <!-- Statistics -->
                    <table class="statistics">
                        <tr>
                            <td colspan="6" class="middle">
                                <span class="display-4 text-primary" style="font-size: 12pt;">
                                    {{ 'STATISTICS' | translate }}
                                </span>
                            </td>
                        </tr>
                        <tr>
                            <th>{{ 'MAXIMUM' | translate }}</th>
                            <td>
                                {{sensor.statistics.maximum.water_level | water_level }}
                            </td>
                            <td></td>
                            <td></td>
                            <th>{{ 'AVERAGE' | translate }}</th>
                            <td>
                                {{sensor.statistics.average.avg_water_level | water_level }}
                            </td>
                        </tr>
                        <tr>
                            <th>{{ 'MINIMUM' | translate }}</th>
                            <td>
                                {{sensor.statistics.minimum.water_level | water_level }}
                            </td>
                            <td></td>
                            <td></td>
                            <th>{{ 'STD' | translate }}</th>
                            <td>
                                {{sensor.statistics.std.std_water_level | water_level }}
                            </td>
                        </tr>
                    </table>
                </div>
            </div>
        </div>
    </div>
    <br>

    <!-- 1st Tab: General -->
    <div ng-if="tab==1 && sensor">
        <div class="row">
            <div class="col-md-6">
                <div class="card" style="margin-bottom: 0px;">
                    <h3 class="card-header">{{ 'DETAILS' | translate }}</h3>
                    <div style="padding-left: 15px; padding-right: 15px; padding-bottom: 10px;" id="details">
                        <table class="table-sm" style="margin-bottom: 0px;">
                            <tbody>
                                <tr>
                                    <th>{{ 'ONLINE' | translate }}</th>
                                    <td>
                                        <span ng-if="sensor.online_status">
                                            <span class="label label-pill label-success">
                                                {{ 'ONLINE_' | translate }}
                                            </span>
                                        </span>
                                        <span ng-if="!sensor.online_status">
                                            <span class="label label-pill label-danger">
                                                {{ 'OFFLINE_' | translate }}
                                            </span>
                                        </span>
                                    </td>
                                </tr>
                                <tr>
                                    <th>{{ 'PRIVATE' | translate }} / {{ 'PUBLIC' | translate }}</th>
                                    <td>
                                        <span ng-if="sensor.private" class="text-primary">
                                            <i class="fa fa-lock" aria-hidden="true"></i>
                                        </span>
                                        <span ng-if="!sensor.private">
                                            <i class="fa fa-unlock-alt" aria-hidden="true"></i>
                                        </span>
                                    </td>
                                </tr>
                                <tr>
                                    <th>{{ 'COORDINATES' | translate }}</th>
                                    <td>{{sensor.lng}} <small>{{ 'LONGITUDE' | translate }}</small></td>
                                </tr>
                                <tr>
                                    <th></th>
                                    <td>{{sensor.lat}} <small>{{ 'LATITUDE' | translate }}</small></td>
                                </tr>
                                <tr>
                                    <th>{{ 'SENSOR_HEIGHT' | translate }}</th>
                                    <td>{{sensor.sensor_height}}
                                        <small>{{ sensor.sensor_height_unit | translate }}</small>
                                    </td>
                                </tr>
                                <tr>
                                    <th>{{ 'CROSSING_HEIGHT' | translate }}</th>
                                    <td>{{sensor.crossing_height}}
                                        <small>{{ sensor.crossing_height_unit | translate }}</small>
                                    </td>
                                </tr>
                                <tr>
                                    <th>{{ 'MEASURE_FREQUENCY' | translate }}
                                        <small>({{ 'DEFAULT' | translate }})</small>
                                    </th>
                                    <td>{{sensor.default_frequency}}
                                        <small>{{ sensor.default_frequency_unit | translate }}</small>
                                    </td>
                                </tr>
                                <tr>
                                    <th>{{ 'MEASURE_FREQUENCY' | translate }}
                                        <small>({{ 'DANGER' | translate }})</small>
                                    </th>
                                    <td>{{sensor.danger_frequency}}
                                        <small>{{ sensor.danger_frequency_unit | translate }}</small>
                                    </td>
                                </tr>
                                <tr>
                                    <th>{{ 'THRESHOLD' | translate }}</th>
                                    <td>{{sensor.threshold_value}}
                                        <small>{{ sensor.threshold_value_unit | translate }}</small>
                                    </td>
                                </tr>
                                <tr>
                                    <th>{{ 'INCREASED_FREQUENCY' | translate }}</th>
                                    <td>
                                        <span ng-if="sensor.increased_frequency" class="text-warning">
                                            <i class="fa fa-bell" aria-hidden="true"></i>
                                        </span>
                                        <span ng-if="!sensor.increased_frequency">
                                            <i class="fa fa-bell-slash" aria-hidden="true"></i>
                                        </span>
                                    </td>
                                </tr>
                                <tr>
                                    <th>{{ 'CREATED' | translate }}</th>
                                    <td>{{ sensor.created | time }}</td>
                                </tr>
                                <tr>
                                    <th>{{ 'UPDATED' | translate }}</th>
                                    <td>{{ sensor.updated | time }}</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
            <div class="col-md-6">
                <div class="card" style="margin-bottom: 0px;">
                    <h3 class="card-header">{{ 'MAP' | translate }}</h3>
                    <leaflet id="map_2" markers="markers" center="center" layers="layers" paths="paths" legend="legend" event-broadcast="events"></leaflet>
                </div>
            </div>
        </div>
        <br>

        <!-- Weather Forecast Card -->
        <div class="row">
            <div class="col-md-12" ng-if="sensor">
                <div class="card" style="margin-bottom: 0px;">
                    <h3 class="card-header">{{ 'WEATHER_FORECAST' | translate }}</h3>

                    <!-- Weather Forecast -->
                    <div style="padding-left: 5px; padding-right: 5px;">

                        <!-- Hourly or daily settings -->
                        <div class="right" ng-if="weather_forecast && weather_forecast_status">
                            <small>
                                <a ng-click="setWeatherInterval('hourly')" style="cursor:pointer;" ng-class="{'bold': weather_interval == 'hourly' }">{{ 'NEXT_HOURS' | translate }}</a> | <a ng-click="setWeatherInterval('daily')" style="cursor:pointer;" ng-class="{'bold': weather_interval == 'daily' }">{{ 'NEXT_DAYS' | translate }}</a>
                            </small>
                        </div>

                        <!-- Forecast Table -->
                        <table class="forecast" ng-if="weather_forecast_status">

                            <!-- Spinner -->
                            <tr ng-if="!weather_forecast">
                                <td colspan="27" ng-if="weather_interval == 'hourly' ">
                                    <center><i class="fa fa-spinner fa-pulse"></i></center>
                                </td>
                                <td colspan="10" ng-if="weather_interval == 'daily' ">
                                    <center><i class="fa fa-spinner fa-pulse"></i></center>
                                </td>
                            </tr>

                            <!-- Headlines -->
                            <tr class="headline" ng-if="weather_forecast">
                                <th></th>

                                <!-- Currently -->
                                <th>
                                    <span ng-class="{'orange': weather_forecast.currently.icon == 'rain' || weather_forecast.currently.icon == 'snow' || weather_forecast.currently.icon == 'hail' || weather_forecast.currently.icon == 'thunderstorm'}">
                                        {{ 'CURRENTLY' | translate }}
                                    </span>
                                </th>

                                <th></th>

                                <!-- Hourly -->
                                <th ng-if="weather_interval == 'hourly' ">
                                    <span ng-class="{'orange': weather_forecast.hourly.data[0].icon == 'rain' || weather_forecast.hourly.data[0].icon == 'snow' || weather_forecast.hourly.data[0].icon == 'hail' || weather_forecast.hourly.data[0].icon == 'thunderstorm'}">
                                        {{ weather_forecast.hourly.data[0].time | unixtime_2 | translate }}
                                    </span>
                                </th>
                                <th ng-if="weather_interval == 'hourly' ">
                                    <span ng-class="{'orange': weather_forecast.hourly.data[1].icon == 'rain' || weather_forecast.hourly.data[1].icon == 'snow' || weather_forecast.hourly.data[1].icon == 'hail' || weather_forecast.hourly.data[1].icon == 'thunderstorm'}">
                                        {{ weather_forecast.hourly.data[1].time | unixtime_2 | translate }}
                                    </span>
                                </th>
                                <th ng-if="weather_interval == 'hourly' ">
                                    <span ng-class="{'orange': weather_forecast.hourly.data[2].icon == 'rain' || weather_forecast.hourly.data[2].icon == 'snow' || weather_forecast.hourly.data[2].icon == 'hail' || weather_forecast.hourly.data[2].icon == 'thunderstorm'}">
                                        {{ weather_forecast.hourly.data[2].time | unixtime_2 | translate }}
                                    </span>
                                </th>
                                <th ng-if="weather_interval == 'hourly' ">
                                    <span ng-class="{'orange': weather_forecast.hourly.data[3].icon == 'rain' || weather_forecast.hourly.data[3].icon == 'snow' || weather_forecast.hourly.data[3].icon == 'hail' || weather_forecast.hourly.data[3].icon == 'thunderstorm'}">
                                        {{ weather_forecast.hourly.data[3].time | unixtime_2 | translate }}
                                    </span>
                                </th>
                                <th ng-if="weather_interval == 'hourly' ">
                                    <span ng-class="{'orange': weather_forecast.hourly.data[4].icon == 'rain' || weather_forecast.hourly.data[4].icon == 'snow' || weather_forecast.hourly.data[4].icon == 'hail' || weather_forecast.hourly.data[4].icon == 'thunderstorm'}">
                                        {{ weather_forecast.hourly.data[4].time | unixtime_2 | translate }}
                                    </span>
                                </th>
                                <th ng-if="weather_interval == 'hourly' ">
                                    <span ng-class="{'orange': weather_forecast.hourly.data[5].icon == 'rain' || weather_forecast.hourly.data[5].icon == 'snow' || weather_forecast.hourly.data[5].icon == 'hail' || weather_forecast.hourly.data[5].icon == 'thunderstorm'}">
                                        {{ weather_forecast.hourly.data[5].time | unixtime_2 | translate }}
                                    </span>
                                </th>
                                <th ng-if="weather_interval == 'hourly' ">
                                    <span ng-class="{'orange': weather_forecast.hourly.data[6].icon == 'rain' || weather_forecast.hourly.data[6].icon == 'snow' || weather_forecast.hourly.data[6].icon == 'hail' || weather_forecast.hourly.data[6].icon == 'thunderstorm'}">
                                        {{ weather_forecast.hourly.data[6].time | unixtime_2 | translate }}
                                    </span>
                                </th>
                                <th ng-if="weather_interval == 'hourly' ">
                                    <span ng-class="{'orange': weather_forecast.hourly.data[7].icon == 'rain' || weather_forecast.hourly.data[7].icon == 'snow' || weather_forecast.hourly.data[7].icon == 'hail' || weather_forecast.hourly.data[7].icon == 'thunderstorm'}">
                                        {{ weather_forecast.hourly.data[7].time | unixtime_2 | translate }}
                                    </span>
                                </th>
                                <th ng-if="weather_interval == 'hourly' ">
                                    <span ng-class="{'orange': weather_forecast.hourly.data[8].icon == 'rain' || weather_forecast.hourly.data[8].icon == 'snow' || weather_forecast.hourly.data[8].icon == 'hail' || weather_forecast.hourly.data[8].icon == 'thunderstorm'}">
                                        {{ weather_forecast.hourly.data[8].time | unixtime_2 | translate }}
                                    </span>
                                </th>
                                <th ng-if="weather_interval == 'hourly' ">
                                    <span ng-class="{'orange': weather_forecast.hourly.data[9].icon == 'rain' || weather_forecast.hourly.data[9].icon == 'snow' || weather_forecast.hourly.data[9].icon == 'hail' || weather_forecast.hourly.data[9].icon == 'thunderstorm'}">
                                        {{ weather_forecast.hourly.data[9].time | unixtime_2 | translate }}
                                    </span>
                                </th>
                                <th ng-if="weather_interval == 'hourly' ">
                                    <span ng-class="{'orange': weather_forecast.hourly.data[10].icon == 'rain' || weather_forecast.hourly.data[10].icon == 'snow' || weather_forecast.hourly.data[10].icon == 'hail' || weather_forecast.hourly.data[10].icon == 'thunderstorm'}">
                                        {{ weather_forecast.hourly.data[10].time | unixtime_2 | translate }}
                                    </span>
                                </th>
                                <th ng-if="weather_interval == 'hourly' ">
                                    <span ng-class="{'orange': weather_forecast.hourly.data[11].icon == 'rain' || weather_forecast.hourly.data[11].icon == 'snow' || weather_forecast.hourly.data[11].icon == 'hail' || weather_forecast.hourly.data[11].icon == 'thunderstorm'}">
                                        {{ weather_forecast.hourly.data[11].time | unixtime_2 | translate }}
                                    </span>
                                </th>
                                <th ng-if="weather_interval == 'hourly' ">
                                    <span ng-class="{'orange': weather_forecast.hourly.data[12].icon == 'rain' || weather_forecast.hourly.data[12].icon == 'snow' || weather_forecast.hourly.data[12].icon == 'hail' || weather_forecast.hourly.data[12].icon == 'thunderstorm'}">
                                        {{ weather_forecast.hourly.data[12].time | unixtime_2 | translate }}
                                    </span>
                                </th>
                                <th ng-if="weather_interval == 'hourly' ">
                                    <span ng-class="{'orange': weather_forecast.hourly.data[13].icon == 'rain' || weather_forecast.hourly.data[13].icon == 'snow' || weather_forecast.hourly.data[13].icon == 'hail' || weather_forecast.hourly.data[13].icon == 'thunderstorm'}">
                                        {{ weather_forecast.hourly.data[13].time | unixtime_2 | translate }}
                                    </span>
                                </th>
                                <th ng-if="weather_interval == 'hourly' ">
                                    <span ng-class="{'orange': weather_forecast.hourly.data[14].icon == 'rain' || weather_forecast.hourly.data[14].icon == 'snow' || weather_forecast.hourly.data[14].icon == 'hail' || weather_forecast.hourly.data[14].icon == 'thunderstorm'}">
                                        {{ weather_forecast.hourly.data[14].time | unixtime_2 | translate }}
                                    </span>
                                </th>
                                <th ng-if="weather_interval == 'hourly' ">
                                    <span ng-class="{'orange': weather_forecast.hourly.data[15].icon == 'rain' || weather_forecast.hourly.data[15].icon == 'snow' || weather_forecast.hourly.data[15].icon == 'hail' || weather_forecast.hourly.data[15].icon == 'thunderstorm'}">
                                        {{ weather_forecast.hourly.data[15].time | unixtime_2 | translate }}
                                    </span>
                                </th>
                                <th ng-if="weather_interval == 'hourly' ">
                                    <span ng-class="{'orange': weather_forecast.hourly.data[16].icon == 'rain' || weather_forecast.hourly.data[16].icon == 'snow' || weather_forecast.hourly.data[16].icon == 'hail' || weather_forecast.hourly.data[16].icon == 'thunderstorm'}">
                                        {{ weather_forecast.hourly.data[16].time | unixtime_2 | translate }}
                                    </span>
                                </th>
                                <th ng-if="weather_interval == 'hourly' ">
                                    <span ng-class="{'orange': weather_forecast.hourly.data[17].icon == 'rain' || weather_forecast.hourly.data[17].icon == 'snow' || weather_forecast.hourly.data[17].icon == 'hail' || weather_forecast.hourly.data[17].icon == 'thunderstorm'}">
                                        {{ weather_forecast.hourly.data[17].time | unixtime_2 | translate }}
                                    </span>
                                </th>
                                <th ng-if="weather_interval == 'hourly' ">
                                    <span ng-class="{'orange': weather_forecast.hourly.data[18].icon == 'rain' || weather_forecast.hourly.data[18].icon == 'snow' || weather_forecast.hourly.data[18].icon == 'hail' || weather_forecast.hourly.data[18].icon == 'thunderstorm'}">
                                        {{ weather_forecast.hourly.data[18].time | unixtime_2 | translate }}
                                    </span>
                                </th>
                                <th ng-if="weather_interval == 'hourly' ">
                                    <span ng-class="{'orange': weather_forecast.hourly.data[19].icon == 'rain' || weather_forecast.hourly.data[19].icon == 'snow' || weather_forecast.hourly.data[19].icon == 'hail' || weather_forecast.hourly.data[19].icon == 'thunderstorm'}">
                                        {{ weather_forecast.hourly.data[19].time | unixtime_2 | translate }}
                                    </span>
                                </th>
                                <th ng-if="weather_interval == 'hourly' ">
                                    <span ng-class="{'orange': weather_forecast.hourly.data[20].icon == 'rain' || weather_forecast.hourly.data[20].icon == 'snow' || weather_forecast.hourly.data[20].icon == 'hail' || weather_forecast.hourly.data[20].icon == 'thunderstorm'}">
                                        {{ weather_forecast.hourly.data[20].time | unixtime_2 | translate }}
                                    </span>
                                </th>
                                <th ng-if="weather_interval == 'hourly' ">
                                    <span ng-class="{'orange': weather_forecast.hourly.data[21].icon == 'rain' || weather_forecast.hourly.data[21].icon == 'snow' || weather_forecast.hourly.data[21].icon == 'hail' || weather_forecast.hourly.data[21].icon == 'thunderstorm'}">
                                        {{ weather_forecast.hourly.data[21].time | unixtime_2 | translate }}
                                    </span>
                                </th>
                                <th ng-if="weather_interval == 'hourly' ">
                                    <span ng-class="{'orange': weather_forecast.hourly.data[22].icon == 'rain' || weather_forecast.hourly.data[22].icon == 'snow' || weather_forecast.hourly.data[22].icon == 'hail' || weather_forecast.hourly.data[22].icon == 'thunderstorm'}">
                                        {{ weather_forecast.hourly.data[22].time | unixtime_2 | translate }}
                                    </span>
                                </th>
                                <th ng-if="weather_interval == 'hourly' ">
                                    <span ng-class="{'orange': weather_forecast.hourly.data[23].icon == 'rain' || weather_forecast.hourly.data[23].icon == 'snow' || weather_forecast.hourly.data[23].icon == 'hail' || weather_forecast.hourly.data[23].icon == 'thunderstorm'}">
                                        {{ weather_forecast.hourly.data[23].time | unixtime_2 | translate }}
                                    </span>
                                </th>

                                <!-- Daily -->
                                <th ng-if="weather_interval == 'daily' ">
                                    <span ng-class="{'orange': weather_forecast.daily.data[0].icon == 'rain' || weather_forecast.daily.data[0].icon == 'snow' || weather_forecast.daily.data[0].icon == 'hail' || weather_forecast.daily.data[0].icon == 'thunderstorm'}">
                                        {{ 'TODAY' | translate }}
                                    </span>
                                </th>
                                <th ng-if="weather_interval == 'daily' ">
                                    <span ng-class="{'orange': weather_forecast.daily.data[1].icon == 'rain' || weather_forecast.daily.data[1].icon == 'snow' || weather_forecast.daily.data[1].icon == 'hail' || weather_forecast.daily.data[1].icon == 'thunderstorm'}">
                                        {{ 'TOMORROW' | translate }}
                                    </span>
                                </th>
                                <th ng-if="weather_interval == 'daily' ">
                                    <span ng-class="{'orange': weather_forecast.daily.data[2].icon == 'rain' || weather_forecast.daily.data[2].icon == 'snow' || weather_forecast.daily.data[2].icon == 'hail' || weather_forecast.daily.data[2].icon == 'thunderstorm'}">
                                        {{ weather_forecast.daily.data[2].time | unixtime | translate }}
                                    </span>
                                </th>
                                <th ng-if="weather_interval == 'daily' ">
                                    <span ng-class="{'orange': weather_forecast.daily.data[3].icon == 'rain' || weather_forecast.daily.data[3].icon == 'snow' || weather_forecast.daily.data[3].icon == 'hail' || weather_forecast.daily.data[3].icon == 'thunderstorm'}">
                                        {{ weather_forecast.daily.data[3].time | unixtime | translate }}
                                    </span>
                                </th>
                                <th ng-if="weather_interval == 'daily' ">
                                    <span ng-class="{'orange': weather_forecast.daily.data[4].icon == 'rain' || weather_forecast.daily.data[4].icon == 'snow' || weather_forecast.daily.data[4].icon == 'hail' || weather_forecast.daily.data[4].icon == 'thunderstorm'}">
                                        {{ weather_forecast.daily.data[4].time | unixtime | translate }}
                                    </span>
                                </th>
                                <th ng-if="weather_interval == 'daily' ">
                                    <span ng-class="{'orange': weather_forecast.daily.data[5].icon == 'rain' || weather_forecast.daily.data[5].icon == 'snow' || weather_forecast.daily.data[5].icon == 'hail' || weather_forecast.daily.data[5].icon == 'thunderstorm'}">
                                        {{ weather_forecast.daily.data[5].time | unixtime | translate }}
                                    </span>
                                </th>
                                <th ng-if="weather_interval == 'daily' ">
                                    <span ng-class="{'orange': weather_forecast.daily.data[6].icon == 'rain' || weather_forecast.daily.data[6].icon == 'snow' || weather_forecast.daily.data[6].icon == 'hail' || weather_forecast.daily.data[6].icon == 'thunderstorm'}">
                                        {{ weather_forecast.daily.data[6].time | unixtime | translate }}
                                    </span>
                                </th>
                            </tr>

                            <!-- Hourly Weather Icons -->
                            <tr class="weatherIcon_2" ng-if="weather_forecast && weather_interval == 'hourly' ">
                                <th></th>
                                <td>
                                    <i class="wi wi-forecast-io-{{weather_forecast.currently.icon}}" ng-class="{
                                        'orange':
                                            weather_forecast.currently.icon == 'rain' || weather_forecast.currently.icon == 'snow' ||
                                            weather_forecast.currently.icon == 'hail' ||
                                            weather_forecast.currently.icon == 'thunderstorm'
                                    }"></i>
                                </td>
                                <th></th>
                                <td>
                                    <i class="wi wi-forecast-io-{{weather_forecast.hourly.data[0].icon}}" ng-class="{
                                        'orange':
                                            weather_forecast.hourly.data[0].icon == 'rain' || weather_forecast.hourly.data[0].icon == 'snow' ||
                                            weather_forecast.hourly.data[0].icon == 'hail' ||
                                            weather_forecast.hourly.data[0].icon == 'thunderstorm'
                                    }"></i>
                                </td>
                                <td>
                                    <i class="wi wi-forecast-io-{{weather_forecast.hourly.data[1].icon}}" ng-class="{
                                        'orange':
                                            weather_forecast.hourly.data[1].icon == 'rain' || weather_forecast.hourly.data[1].icon == 'snow' ||
                                            weather_forecast.hourly.data[1].icon == 'hail' ||
                                            weather_forecast.hourly.data[1].icon == 'thunderstorm'
                                    }"></i>
                                </td>
                                <td>
                                    <i class="wi wi-forecast-io-{{weather_forecast.hourly.data[2].icon}}" ng-class="{
                                        'orange':
                                            weather_forecast.hourly.data[2].icon == 'rain' || weather_forecast.hourly.data[2].icon == 'snow' ||
                                            weather_forecast.hourly.data[2].icon == 'hail' ||
                                            weather_forecast.hourly.data[2].icon == 'thunderstorm'
                                    }"></i>
                                </td>
                                <td>
                                    <i class="wi wi-forecast-io-{{weather_forecast.hourly.data[3].icon}}" ng-class="{
                                        'orange':
                                            weather_forecast.hourly.data[3].icon == 'rain' || weather_forecast.hourly.data[3].icon == 'snow' ||
                                            weather_forecast.hourly.data[3].icon == 'hail' ||
                                            weather_forecast.hourly.data[3].icon == 'thunderstorm'
                                    }"></i>
                                </td>
                                <td>
                                    <i class="wi wi-forecast-io-{{weather_forecast.hourly.data[4].icon}}" ng-class="{
                                        'orange':
                                            weather_forecast.hourly.data[4].icon == 'rain' || weather_forecast.hourly.data[4].icon == 'snow' ||
                                            weather_forecast.hourly.data[4].icon == 'hail' ||
                                            weather_forecast.hourly.data[4].icon == 'thunderstorm'
                                    }"></i>
                                </td>
                                <td>
                                    <i class="wi wi-forecast-io-{{weather_forecast.hourly.data[5].icon}}" ng-class="{
                                        'orange':
                                            weather_forecast.hourly.data[5].icon == 'rain' || weather_forecast.hourly.data[5].icon == 'snow' ||
                                            weather_forecast.hourly.data[5].icon == 'hail' ||
                                            weather_forecast.hourly.data[5].icon == 'thunderstorm'
                                    }"></i>
                                </td>
                                <td>
                                    <i class="wi wi-forecast-io-{{weather_forecast.hourly.data[6].icon}}" ng-class="{
                                        'orange':
                                            weather_forecast.hourly.data[6].icon == 'rain' || weather_forecast.hourly.data[6].icon == 'snow' ||
                                            weather_forecast.hourly.data[6].icon == 'hail' ||
                                            weather_forecast.hourly.data[6].icon == 'thunderstorm'
                                    }"></i>
                                </td>
                                <td>
                                    <i class="wi wi-forecast-io-{{weather_forecast.hourly.data[7].icon}}" ng-class="{
                                        'orange':
                                            weather_forecast.hourly.data[7].icon == 'rain' || weather_forecast.hourly.data[7].icon == 'snow' ||
                                            weather_forecast.hourly.data[7].icon == 'hail' ||
                                            weather_forecast.hourly.data[7].icon == 'thunderstorm'
                                    }"></i>
                                </td>
                                <td>
                                    <i class="wi wi-forecast-io-{{weather_forecast.hourly.data[8].icon}}" ng-class="{
                                        'orange':
                                            weather_forecast.hourly.data[8].icon == 'rain' || weather_forecast.hourly.data[8].icon == 'snow' ||
                                            weather_forecast.hourly.data[8].icon == 'hail' ||
                                            weather_forecast.hourly.data[8].icon == 'thunderstorm'
                                    }"></i>
                                </td>
                                <td>
                                    <i class="wi wi-forecast-io-{{weather_forecast.hourly.data[9].icon}}" ng-class="{
                                        'orange':
                                            weather_forecast.hourly.data[9].icon == 'rain' || weather_forecast.hourly.data[9].icon == 'snow' ||
                                            weather_forecast.hourly.data[9].icon == 'hail' ||
                                            weather_forecast.hourly.data[9].icon == 'thunderstorm'
                                    }"></i>
                                </td>
                                <td>
                                    <i class="wi wi-forecast-io-{{weather_forecast.hourly.data[10].icon}}" ng-class="{
                                        'orange':
                                            weather_forecast.hourly.data[10].icon == 'rain' || weather_forecast.hourly.data[10].icon == 'snow' ||
                                            weather_forecast.hourly.data[10].icon == 'hail' ||
                                            weather_forecast.hourly.data[10].icon == 'thunderstorm'
                                    }"></i>
                                </td>
                                <td>
                                    <i class="wi wi-forecast-io-{{weather_forecast.hourly.data[11].icon}}" ng-class="{
                                        'orange':
                                            weather_forecast.hourly.data[11].icon == 'rain' || weather_forecast.hourly.data[11].icon == 'snow' ||
                                            weather_forecast.hourly.data[11].icon == 'hail' ||
                                            weather_forecast.hourly.data[11].icon == 'thunderstorm'
                                    }"></i>
                                </td>
                                <td>
                                    <i class="wi wi-forecast-io-{{weather_forecast.hourly.data[12].icon}}" ng-class="{
                                        'orange':
                                            weather_forecast.hourly.data[12].icon == 'rain' || weather_forecast.hourly.data[12].icon == 'snow' ||
                                            weather_forecast.hourly.data[12].icon == 'hail' ||
                                            weather_forecast.hourly.data[12].icon == 'thunderstorm'
                                    }"></i>
                                </td>
                                <td>
                                    <i class="wi wi-forecast-io-{{weather_forecast.hourly.data[13].icon}}" ng-class="{
                                        'orange':
                                            weather_forecast.hourly.data[13].icon == 'rain' || weather_forecast.hourly.data[13].icon == 'snow' ||
                                            weather_forecast.hourly.data[13].icon == 'hail' ||
                                            weather_forecast.hourly.data[13].icon == 'thunderstorm'
                                    }"></i>
                                </td>
                                <td>
                                    <i class="wi wi-forecast-io-{{weather_forecast.hourly.data[14].icon}}" ng-class="{
                                        'orange':
                                            weather_forecast.hourly.data[14].icon == 'rain' || weather_forecast.hourly.data[14].icon == 'snow' ||
                                            weather_forecast.hourly.data[14].icon == 'hail' ||
                                            weather_forecast.hourly.data[14].icon == 'thunderstorm'
                                    }"></i>
                                </td>
                                <td>
                                    <i class="wi wi-forecast-io-{{weather_forecast.hourly.data[15].icon}}" ng-class="{
                                        'orange':
                                            weather_forecast.hourly.data[15].icon == 'rain' || weather_forecast.hourly.data[15].icon == 'snow' ||
                                            weather_forecast.hourly.data[15].icon == 'hail' ||
                                            weather_forecast.hourly.data[15].icon == 'thunderstorm'
                                    }"></i>
                                </td>
                                <td>
                                    <i class="wi wi-forecast-io-{{weather_forecast.hourly.data[16].icon}}" ng-class="{
                                        'orange':
                                            weather_forecast.hourly.data[16].icon == 'rain' || weather_forecast.hourly.data[16].icon == 'snow' ||
                                            weather_forecast.hourly.data[16].icon == 'hail' ||
                                            weather_forecast.hourly.data[16].icon == 'thunderstorm'
                                    }"></i>
                                </td>
                                <td>
                                    <i class="wi wi-forecast-io-{{weather_forecast.hourly.data[17].icon}}" ng-class="{
                                        'orange':
                                            weather_forecast.hourly.data[17].icon == 'rain' || weather_forecast.hourly.data[17].icon == 'snow' ||
                                            weather_forecast.hourly.data[17].icon == 'hail' ||
                                            weather_forecast.hourly.data[17].icon == 'thunderstorm'
                                    }"></i>
                                </td>
                                <td>
                                    <i class="wi wi-forecast-io-{{weather_forecast.hourly.data[18].icon}}" ng-class="{
                                        'orange':
                                            weather_forecast.hourly.data[18].icon == 'rain' || weather_forecast.hourly.data[18].icon == 'snow' ||
                                            weather_forecast.hourly.data[18].icon == 'hail' ||
                                            weather_forecast.hourly.data[18].icon == 'thunderstorm'
                                    }"></i>
                                </td>
                                <td>
                                    <i class="wi wi-forecast-io-{{weather_forecast.hourly.data[19].icon}}" ng-class="{
                                        'orange':
                                            weather_forecast.hourly.data[19].icon == 'rain' || weather_forecast.hourly.data[19].icon == 'snow' ||
                                            weather_forecast.hourly.data[19].icon == 'hail' ||
                                            weather_forecast.hourly.data[19].icon == 'thunderstorm'
                                    }"></i>
                                </td>
                                <td>
                                    <i class="wi wi-forecast-io-{{weather_forecast.hourly.data[20].icon}}" ng-class="{
                                        'orange':
                                            weather_forecast.hourly.data[20].icon == 'rain' || weather_forecast.hourly.data[20].icon == 'snow' ||
                                            weather_forecast.hourly.data[20].icon == 'hail' ||
                                            weather_forecast.hourly.data[20].icon == 'thunderstorm'
                                    }"></i>
                                </td>
                                <td>
                                    <i class="wi wi-forecast-io-{{weather_forecast.hourly.data[21].icon}}" ng-class="{
                                        'orange':
                                            weather_forecast.hourly.data[21].icon == 'rain' || weather_forecast.hourly.data[21].icon == 'snow' ||
                                            weather_forecast.hourly.data[21].icon == 'hail' ||
                                            weather_forecast.hourly.data[21].icon == 'thunderstorm'
                                    }"></i>
                                </td>
                                <td>
                                    <i class="wi wi-forecast-io-{{weather_forecast.hourly.data[22].icon}}" ng-class="{
                                        'orange':
                                            weather_forecast.hourly.data[22].icon == 'rain' || weather_forecast.hourly.data[22].icon == 'snow' ||
                                            weather_forecast.hourly.data[22].icon == 'hail' ||
                                            weather_forecast.hourly.data[22].icon == 'thunderstorm'
                                    }"></i>
                                </td>
                                <td>
                                    <i class="wi wi-forecast-io-{{weather_forecast.hourly.data[23].icon}}" ng-class="{
                                        'orange':
                                            weather_forecast.hourly.data[23].icon == 'rain' || weather_forecast.hourly.data[23].icon == 'snow' ||
                                            weather_forecast.hourly.data[23].icon == 'hail' ||
                                            weather_forecast.hourly.data[23].icon == 'thunderstorm'
                                    }"></i>
                                </td>
                            </tr>

                            <!-- Daily Weather Icons -->
                            <tr class="weatherIcon" ng-if="weather_forecast && weather_interval == 'daily' ">
                                <th></th>
                                <td>
                                    <i class="wi wi-forecast-io-{{weather_forecast.currently.icon}}" ng-class="{
                                        'orange':
                                            weather_forecast.currently.icon == 'rain' || weather_forecast.currently.icon == 'snow' ||
                                            weather_forecast.currently.icon == 'hail' ||
                                            weather_forecast.currently.icon == 'thunderstorm'
                                    }"></i>
                                </td>
                                <th></th>
                                <td>
                                    <i class="wi wi-forecast-io-{{weather_forecast.daily.data[0].icon}}" ng-class="{
                                        'orange':
                                            weather_forecast.daily.data[0].icon == 'rain' || weather_forecast.daily.data[0].icon == 'snow' ||
                                            weather_forecast.daily.data[0].icon == 'hail' ||
                                            weather_forecast.daily.data[0].icon == 'thunderstorm'
                                    }"></i>
                                </td>
                                <td>
                                    <i class="wi wi-forecast-io-{{weather_forecast.daily.data[1].icon}}" ng-class="{
                                        'orange':
                                            weather_forecast.daily.data[1].icon == 'rain' || weather_forecast.daily.data[1].icon == 'snow' ||
                                            weather_forecast.daily.data[1].icon == 'hail' ||
                                            weather_forecast.daily.data[1].icon == 'thunderstorm'
                                    }"></i>
                                </td>
                                <td>
                                    <i class="wi wi-forecast-io-{{weather_forecast.daily.data[2].icon}}" ng-class="{
                                        'orange':
                                            weather_forecast.daily.data[2].icon == 'rain' || weather_forecast.daily.data[2].icon == 'snow' ||
                                            weather_forecast.daily.data[2].icon == 'hail' ||
                                            weather_forecast.daily.data[2].icon == 'thunderstorm'
                                    }"></i>
                                </td>
                                <td>
                                    <i class="wi wi-forecast-io-{{weather_forecast.daily.data[3].icon}}" ng-class="{
                                        'orange':
                                            weather_forecast.daily.data[3].icon == 'rain' || weather_forecast.daily.data[3].icon == 'snow' ||
                                            weather_forecast.daily.data[3].icon == 'hail' ||
                                            weather_forecast.daily.data[3].icon == 'thunderstorm'
                                    }"></i>
                                </td>
                                <td>
                                    <i class="wi wi-forecast-io-{{weather_forecast.daily.data[4].icon}}" ng-class="{
                                        'orange':
                                            weather_forecast.daily.data[4].icon == 'rain' || weather_forecast.daily.data[4].icon == 'snow' ||
                                            weather_forecast.daily.data[4].icon == 'hail' ||
                                            weather_forecast.daily.data[4].icon == 'thunderstorm'
                                    }"></i>
                                </td>
                                <td>
                                    <i class="wi wi-forecast-io-{{weather_forecast.daily.data[5].icon}}" ng-class="{
                                        'orange':
                                            weather_forecast.daily.data[5].icon == 'rain' || weather_forecast.daily.data[5].icon == 'snow' ||
                                            weather_forecast.daily.data[5].icon == 'hail' ||
                                            weather_forecast.daily.data[5].icon == 'thunderstorm'
                                    }"></i>
                                </td>
                                <td>
                                    <i class="wi wi-forecast-io-{{weather_forecast.daily.data[6].icon}}" ng-class="{
                                        'orange':
                                            weather_forecast.daily.data[6].icon == 'rain' || weather_forecast.daily.data[6].icon == 'snow' ||
                                            weather_forecast.daily.data[6].icon == 'hail' ||
                                            weather_forecast.daily.data[6].icon == 'thunderstorm'
                                    }"></i>
                                </td>
                            </tr>


                            <!-- Hourly Weather Measurements -->
                            <tr class="normal" ng-if="weather_forecast && weather_measurements && weather_interval == 'hourly' ">
                                <th><i class="wi wi-thermometer"></i></th>
                                <td><b>{{weather_forecast.currently.temperature}}°C</b></td>
                                <th><i class="wi wi-thermometer"></i></th>
                                <td>{{ weather_forecast.hourly.data[0].temperature}}°C</td>
                                <td>{{ weather_forecast.hourly.data[1].temperature}}°C</td>
                                <td>{{ weather_forecast.hourly.data[2].temperature}}°C</td>
                                <td>{{ weather_forecast.hourly.data[3].temperature}}°C</td>
                                <td>{{ weather_forecast.hourly.data[4].temperature}}°C</td>
                                <td>{{ weather_forecast.hourly.data[5].temperature}}°C</td>
                                <td>{{ weather_forecast.hourly.data[6].temperature}}°C</td>
                                <td>{{ weather_forecast.hourly.data[7].temperature}}°C</td>
                                <td>{{ weather_forecast.hourly.data[8].temperature}}°C</td>
                                <td>{{ weather_forecast.hourly.data[9].temperature}}°C</td>
                                <td>{{ weather_forecast.hourly.data[10].temperature}}°C</td>
                                <td>{{ weather_forecast.hourly.data[11].temperature}}°C</td>
                                <td>{{ weather_forecast.hourly.data[12].temperature}}°C</td>
                                <td>{{ weather_forecast.hourly.data[13].temperature}}°C</td>
                                <td>{{ weather_forecast.hourly.data[14].temperature}}°C</td>
                                <td>{{ weather_forecast.hourly.data[15].temperature}}°C</td>
                                <td>{{ weather_forecast.hourly.data[16].temperature}}°C</td>
                                <td>{{ weather_forecast.hourly.data[17].temperature}}°C</td>
                                <td>{{ weather_forecast.hourly.data[18].temperature}}°C</td>
                                <td>{{ weather_forecast.hourly.data[19].temperature}}°C</td>
                                <td>{{ weather_forecast.hourly.data[20].temperature}}°C</td>
                                <td>{{ weather_forecast.hourly.data[21].temperature}}°C</td>
                                <td>{{ weather_forecast.hourly.data[22].temperature}}°C</td>
                                <td>{{ weather_forecast.hourly.data[23].temperature}}°C</td>
                            </tr>
                            <tr class="normal" ng-if="weather_forecast && weather_measurements && weather_interval == 'hourly' ">
                                <th><i class="wi wi-humidity"></i></th>
                                <td><b>{{weather_forecast.currently.humidity | humidity}}%</b></td>
                                <th><i class="wi wi-humidity"></i></th>
                                <td>{{ weather_forecast.hourly.data[0].humidity | humidity }}%</td>
                                <td>{{ weather_forecast.hourly.data[1].humidity | humidity }}%</td>
                                <td>{{ weather_forecast.hourly.data[2].humidity | humidity }}%</td>
                                <td>{{ weather_forecast.hourly.data[3].humidity | humidity }}%</td>
                                <td>{{ weather_forecast.hourly.data[4].humidity | humidity }}%</td>
                                <td>{{ weather_forecast.hourly.data[5].humidity | humidity }}%</td>
                                <td>{{ weather_forecast.hourly.data[6].humidity | humidity }}%</td>
                                <td>{{ weather_forecast.hourly.data[7].humidity | humidity }}%</td>
                                <td>{{ weather_forecast.hourly.data[8].humidity | humidity }}%</td>
                                <td>{{ weather_forecast.hourly.data[9].humidity | humidity }}%</td>
                                <td>{{ weather_forecast.hourly.data[10].humidity | humidity }}%</td>
                                <td>{{ weather_forecast.hourly.data[11].humidity | humidity }}%</td>
                                <td>{{ weather_forecast.hourly.data[12].humidity | humidity }}%</td>
                                <td>{{ weather_forecast.hourly.data[13].humidity | humidity }}%</td>
                                <td>{{ weather_forecast.hourly.data[14].humidity | humidity }}%</td>
                                <td>{{ weather_forecast.hourly.data[15].humidity | humidity }}%</td>
                                <td>{{ weather_forecast.hourly.data[16].humidity | humidity }}%</td>
                                <td>{{ weather_forecast.hourly.data[17].humidity | humidity }}%</td>
                                <td>{{ weather_forecast.hourly.data[18].humidity | humidity }}%</td>
                                <td>{{ weather_forecast.hourly.data[19].humidity | humidity }}%</td>
                                <td>{{ weather_forecast.hourly.data[20].humidity | humidity }}%</td>
                                <td>{{ weather_forecast.hourly.data[21].humidity | humidity }}%</td>
                                <td>{{ weather_forecast.hourly.data[22].humidity | humidity }}%</td>
                                <td>{{ weather_forecast.hourly.data[23].humidity | humidity }}%</td>
                            </tr>

                            <!-- Daily Weather Measurements -->
                            <tr class="normal" ng-if="weather_forecast && weather_measurements && weather_interval == 'daily' ">
                                <th rowspan="2"><i class="wi wi-thermometer"></i></th>
                                <td rowspan="2"><b>{{weather_forecast.currently.temperature}}°C</b></td>
                                <th><i class="wi wi-thermometer"></i></th>
                                <td>{{ weather_forecast.daily.data[0].temperatureMax}}°C</td>
                                <td>{{ weather_forecast.daily.data[1].temperatureMax}}°C</td>
                                <td>{{ weather_forecast.daily.data[2].temperatureMax}}°C</td>
                                <td>{{ weather_forecast.daily.data[3].temperatureMax}}°C</td>
                                <td>{{ weather_forecast.daily.data[4].temperatureMax}}°C</td>
                                <td>{{ weather_forecast.daily.data[5].temperatureMax}}°C</td>
                                <td>{{ weather_forecast.daily.data[6].temperatureMax}}°C</td>
                            </tr>
                            <tr class="normal" ng-if="weather_forecast && weather_measurements && weather_interval == 'daily' ">
                                <th><i class="wi wi-thermometer-exterior"></i></th>
                                <td>{{ weather_forecast.daily.data[0].temperatureMin}}°C</td>
                                <td>{{ weather_forecast.daily.data[1].temperatureMin}}°C</td>
                                <td>{{ weather_forecast.daily.data[2].temperatureMin}}°C</td>
                                <td>{{ weather_forecast.daily.data[3].temperatureMin}}°C</td>
                                <td>{{ weather_forecast.daily.data[4].temperatureMin}}°C</td>
                                <td>{{ weather_forecast.daily.data[5].temperatureMin}}°C</td>
                                <td>{{ weather_forecast.daily.data[6].temperatureMin}}°C</td>
                            </tr>
                            <tr class="normal" ng-if="weather_forecast && weather_measurements && weather_interval == 'daily' ">
                                <th><i class="wi wi-humidity"></i></th>
                                <td><b>{{weather_forecast.currently.humidity | humidity}}%</b></td>
                                <th><i class="wi wi-humidity"></i></th>
                                <td>{{weather_forecast.daily.data[0].humidity | humidity}}%</td>
                                <td>{{weather_forecast.daily.data[1].humidity | humidity}}%</td>
                                <td>{{weather_forecast.daily.data[2].humidity | humidity}}%</td>
                                <td>{{weather_forecast.daily.data[3].humidity | humidity}}%</td>
                                <td>{{weather_forecast.daily.data[4].humidity | humidity}}%</td>
                                <td>{{weather_forecast.daily.data[5].humidity | humidity}}%</td>
                                <td>{{weather_forecast.daily.data[6].humidity | humidity}}%</td>
                            </tr>

                        </table>

                        <!-- Measurements-Settings -->
                        <div class="right" ng-if="weather_forecast && weather_forecast_status">
                            <small>
                                <a ng-click="showWeatherMeasurements()" style="cursor:pointer;">
                                    <span ng-if="!weather_measurements">
                                        {{ 'SHOW_MEASUREMENTS' | translate }}
                                    </span>
                                    <span ng-if="weather_measurements">
                                        {{ 'HIDE_MEASUREMENTS' | translate }}
                                    </span>
                                </a>
                            </small>
                        </div>
                        <br>

                    </div>
                </div>
            </div>
        </div>
        <br>

        <!-- Nearby Sensors Card -->
        <div class="row">
            <div class="col-md-12">
                <div class="card" style="margin-bottom: 0px;">
                    <h3 class="card-header">{{ 'NEARBY_SENSORS' | translate }}</h3>

                    <table class="table table-striped table-hover" style="margin-top: -8px; margin-bottom: 0px;">
                        <thead>
                            <tr>
                                <th>{{ 'DISTANCE' | translate }}</th>
                                <th>{{ 'ONLINE' | translate }}</th>
                                <th>{{ 'DEVICE_ID' | translate }}</th>
                                <th>{{ 'DESCRIPTION' | translate }}</th>
                                <th></th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr ng-if="!sensor.related_sensors">
                                <td colspan="6">
                                    <center><i class="fa fa-spinner fa-pulse"></i></center>
                                </td>
                            </tr>
                            <tr ng-if="sensor.related_sensors.length == 0">
                                <td colspan="6">
                                    <center>- {{ 'NONE' | translate}} -</center>
                                </td>
                            </tr>
                            <tr ng-if="sensor.related_sensors.length != 0" ng-repeat="related_sensor in sensor.related_sensors | orderBy: 'distance' " ng-click="showDetails(related_sensor.sensor_id)" style="cursor:pointer">
                                <td>
                                    <h5>
                                        <span class="label label-primary">
                                            {{(related_sensor.distance).toFixed(0) | distance }}
                                        </span>
                                    </h5>
                                </td>
                                <td>
                                    <span ng-if="related_sensor.online_status" class="text-success">
                                        <i class="fa fa-circle" aria-hidden="true"></i>
                                    </span>
                                    <span ng-if="!related_sensor.online_status" class="text-danger">
                                        <i class="fa fa-circle" aria-hidden="true"></i>
                                    </span>
                                </td>
                                <td><kbd>{{related_sensor.device_id}}</kbd></td>
                                <td>{{related_sensor.description}}</td>
                                <td class="right">
                                    <div class="btn-group" role="group" aria-label="Edit">
                                        <button ng-click="showOnMap(related_sensor.sensor_id); $event.stopPropagation();" class="btn btn-sm btn-secondary">
                                            <i class="fa fa-map"></i>
                                        </button>
                                    </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
        <br>

        <!-- Nearby Stations Cards -->
        <div class="row">
            <div class="col-md-6">

                <!-- Emergency Station -->
                <div class="card" style="margin-bottom: 0px;">
                    <h3 class="card-header">{{ 'NEARBY_EMERGENCY_STATIONS' | translate }}</h3>
                    <ul class="list-group list-group-flush" style="margin-top: -10px;">
                        <li class="list-group-item" ng-repeat="emergency_station in sensor.emergency_stations">
                            <div class="row">
                                <div class="col-xs-2">
                                    <h5>
                                        <span class="label label-primary">
                                            {{(emergency_station.distance).toFixed(0) | distance }}
                                        </span>
                                    </h5>
                                </div>
                                <div class="col-xs-10">
                                    <h5>{{emergency_station.name}}</h5>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-xs-2"></div>
                                <div class="col-xs-5">
                                    {{emergency_station.street}} {{emergency_station.house_number}} <span ng-if="emergency_station.addition != '' ">({{emergency_station.addition}})</span>
                                    <br> {{emergency_station.zip_code}}, {{emergency_station.city}},
                                    <br> {{emergency_station.country | translate }}
                                    <br>
                                </div>
                                <div class="col-xs-5">
                                    {{emergency_station.phone_number}}
                                </div>
                            </div>
                        </li>
                    </ul>
                </div>
            </div>
            <div class="col-md-6">

                <!-- Service Station -->
                <div class="card" style="margin-bottom: 0px;">
                    <h3 class="card-header">{{ 'NEARBY_SERVICE_STATIONS' | translate }}</h3>
                    <ul class="list-group list-group-flush" style="margin-top: -10px;">
                        <li class="list-group-item" ng-repeat="service_station in sensor.service_stations">
                            <div class="row">
                                <div class="col-xs-2">
                                    <h5>
                                        <span class="label label-info">
                                            {{(service_station.distance).toFixed(0) | distance }}
                                        </span>
                                    </h5>
                                </div>
                                <div class="col-xs-10">
                                    <h5>{{service_station.name}}</h5>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-xs-2"></div>
                                <div class="col-xs-5">
                                    {{service_station.street}} {{service_station.house_number}} <span ng-if="service_station.addition != '' ">({{service_station.addition}})</span>
                                    <br> {{service_station.zip_code}}, {{service_station.city}},
                                    <br> {{service_station.country | translate }}
                                    <br>
                                </div>
                                <div class="col-xs-5">
                                    {{service_station.phone_number}}
                                </div>
                            </div>
                        </li>
                    </ul>
                </div>
            </div>
        </div>
    </div>

    <!-- 2nd Tab: Timeseries -->
    <div class="row" ng-if="tab==2">
        <div class="col-md-12">
            <div class="card">

                <!-- Linechart -->
                <div class="linechart" ng-if="data.dataset.length > 0">
                    <linechart data="data" options="options" height="390px"></linechart>
                </div>
                <div class="linechart" ng-if="data.dataset.length == 0">
                    <div style="height: 390px; line-height:390px; text-align: center;">
                        - {{ 'NO' | translate}} {{ 'MEASUREMENTS' | translate}} {{ 'FOUND' | translate}}-
                    </div>
                </div>

                <br>
                <br>
                <div class="row">
                    <!-- Left selector: Hours, days, weeks, ... -->
                    <div class="col-md-5">
                        <div class="middle">
                            <div class="btn-group" role="group">
                                <button type="button" class="btn " ng-class="{ 'btn-primary': timeoption == 'hours', 'btn-primary-outline': timeoption != 'hours' }" ng-click="changeOption('hours')">
                                    {{ 'HOURS' | translate }}
                                </button>
                                <button type="button" class="btn" ng-class="{ 'btn-primary': timeoption == 'days', 'btn-primary-outline': timeoption != 'days' }" ng-click="changeOption('days')">
                                    {{ 'DAYS' | translate }}
                                </button>
                                <button type="button" class="btn" ng-class="{ 'btn-primary': timeoption == 'weeks', 'btn-primary-outline': timeoption != 'weeks' }" ng-click="changeOption('weeks')">
                                    {{ 'WEEKS' | translate }}
                                </button>
                                <button type="button" class="btn" ng-class="{ 'btn-primary': timeoption == 'months', 'btn-primary-outline': timeoption != 'months' }" ng-click="changeOption('months')">
                                    {{ 'MONTHS' | translate }}
                                </button>
                                <button type="button" class="btn" ng-class="{ 'btn-primary': timeoption == 'years', 'btn-primary-outline': timeoption != 'years' }" ng-click="changeOption('years')">
                                    {{ 'YEARS' | translate }}
                                </button>
                                <button type="button" class="btn" ng-class="{ 'btn-primary': timeoption == 'all', 'btn-primary-outline': timeoption != 'all' }" ng-click="changeOption('all')">
                                    {{ 'ALL' | translate }}
                                </button>
                            </div>
                        </div>
                    </div>
                    <!-- Right selector: Entries dependend on left selector -->
                    <div class="col-md-7">
                        <div class="left">

                            <!-- Minutes & Hours -->
                            <div class="btn-group" role="group" ng-if="query.time=='minutes' || query.time=='hours'">
                                <button type="button" class="btn" ng-class="{ 'btn-primary': (query.time=='minutes' && query.value == 30), 'btn-primary-outline': (query.time!='minutes' && query.value != 30) }" ng-click="changeQuery('minutes', 30)">
                                    30 {{ 'MINUTES' | translate }}
                                </button>
                                <button type="button" class="btn" ng-class="{ 'btn-primary': (query.time=='hours' && query.value == 1), 'btn-primary-outline': ((query.time!='minutes' || query.time!='hours') && query.value != 1) }" ng-click="changeQuery('hours', 1)">
                                    1 {{ 'HOUR' | translate }}
                                </button>
                                <button type="button" class="btn" ng-class="{ 'btn-primary': (query.time=='hours' && query.value == 3), 'btn-primary-outline': ((query.time!='minutes' || query.time!='hours') && query.value != 3) }" ng-click="changeQuery('hours', 3)">
                                    3 {{ 'HOURS' | translate }}
                                </button>
                                <button type="button" class="btn" ng-class="{ 'btn-primary': (query.time=='hours' && query.value == 6), 'btn-primary-outline': ((query.time!='minutes' || query.time!='hours') && query.value != 6) }" ng-click="changeQuery('hours', 6)">
                                    6 {{ 'HOURS' | translate }}
                                </button>
                                <button type="button" class="btn" ng-class="{ 'btn-primary': (query.time=='hours' && query.value == 12), 'btn-primary-outline': ((query.time!='minutes' || query.time!='hours') && query.value != 12) }" ng-click="changeQuery('hours', 12)">
                                    12 {{ 'HOURS' | translate }}
                                </button>
                                <button type="button" class="btn" ng-class="{ 'btn-primary': (query.time=='hours' && query.value == 24), 'btn-primary-outline': ((query.time!='minutes' || query.time!='hours') && query.value != 24) }" ng-click="changeQuery('hours', 24)">
                                    24 {{ 'HOURS' | translate }}
                                </button>
                            </div>

                            <!-- Days -->
                            <div class="btn-group" role="group" ng-if="query.time=='days'">
                                <button type="button" class="btn" ng-class="{ 'btn-primary': (query.time=='days' && query.value == 1), 'btn-primary-outline': (query.time=='days' && query.value != 1) }" ng-click="changeQuery('days', 1)">
                                    1 {{ 'DAY' | translate }}
                                </button>
                                <button type="button" class="btn" ng-class="{ 'btn-primary': (query.time=='days' && query.value == 3), 'btn-primary-outline': (query.time=='days' && query.value != 3) }" ng-click="changeQuery('days', 3)">
                                    3 {{ 'DAYS' | translate }}
                                </button>
                                <button type="button" class="btn" ng-class="{ 'btn-primary': (query.time=='days' && query.value == 5), 'btn-primary-outline': (query.time=='days' && query.value != 5) }" ng-click="changeQuery('days', 5)">
                                    5 {{ 'DAYS' | translate }}
                                </button>
                                <button type="button" class="btn" ng-class="{ 'btn-primary': (query.time=='days' && query.value == 7), 'btn-primary-outline': (query.time=='days' && query.value != 7) }" ng-click="changeQuery('days', 7)">
                                    7 {{ 'DAYS' | translate }}
                                </button>
                            </div>

                            <!-- Weeks -->
                            <div class="btn-group" role="group" ng-if="query.time=='weeks'">
                                <button type="button" class="btn" ng-class="{ 'btn-primary': (query.time=='weeks' && query.value == 1), 'btn-primary-outline': (query.time=='weeks' && query.value != 1) }" ng-click="changeQuery('weeks', 1)">
                                    1 {{ 'WEEK' | translate }}
                                </button>
                                <button type="button" class="btn" ng-class="{ 'btn-primary': (query.time=='weeks' && query.value == 2), 'btn-primary-outline': (query.time=='weeks' && query.value != 2) }" ng-click="changeQuery('weeks', 2)">
                                    2 {{ 'WEEKS' | translate }}
                                </button>
                                <button type="button" class="btn" ng-class="{ 'btn-primary': (query.time=='weeks' && query.value == 3), 'btn-primary-outline': (query.time=='weeks' && query.value != 3) }" ng-click="changeQuery('weeks', 3)">
                                    3 {{ 'WEEKS' | translate }}
                                </button>
                                <button type="button" class="btn" ng-class="{ 'btn-primary': (query.time=='weeks' && query.value == 4), 'btn-primary-outline': (query.time=='weeks' && query.value != 4) }" ng-click="changeQuery('weeks', 4)">
                                    4 {{ 'WEEKS' | translate }}
                                </button>
                            </div>

                            <!-- Months -->
                            <div class="btn-group" role="group" ng-if="query.time=='months'">
                                <button type="button" class="btn" ng-class="{ 'btn-primary': (query.time=='months' && query.value == 1), 'btn-primary-outline': (query.time=='months' && query.value != 1) }" ng-click="changeQuery('months', 1)">
                                    1 {{ 'MONTH' | translate }}
                                </button>
                                <button type="button" class="btn" ng-class="{ 'btn-primary': (query.time=='months' && query.value == 3), 'btn-primary-outline': (query.time=='months' && query.value != 3) }" ng-click="changeQuery('months', 3)">
                                    3 {{ 'MONTHS' | translate }}
                                </button>
                                <button type="button" class="btn" ng-class="{ 'btn-primary': (query.time=='months' && query.value == 6), 'btn-primary-outline': (query.time=='months' && query.value != 6) }" ng-click="changeQuery('months', 6)">
                                    6 {{ 'MONTHS' | translate }}
                                </button>
                                <button type="button" class="btn" ng-class="{ 'btn-primary': (query.time=='months' && query.value == 12), 'btn-primary-outline': (query.time=='months' && query.value != 12) }" ng-click="changeQuery('months', 12)">
                                    12 {{ 'MONTHS' | translate }}
                                </button>
                            </div>

                            <!-- Years -->
                            <div class="btn-group" role="group" ng-if="query.time=='years'">
                                <button type="button" class="btn" ng-class="{ 'btn-primary': (query.time=='years' && query.value == 1), 'btn-primary-outline': (query.time=='years' && query.value != 1) }" ng-click="changeQuery('years', 1)">
                                    1 {{ 'YEAR' | translate }}
                                </button>
                                <button type="button" class="btn" ng-class="{ 'btn-primary': (query.time=='years' && query.value == 5), 'btn-primary-outline': (query.time=='years' && query.value != 5) }" ng-click="changeQuery('years', 5)">
                                    5 {{ 'YEARS' | translate }}
                                </button>
                                <button type="button" class="btn" ng-class="{ 'btn-primary': (query.time=='years' && query.value == 10), 'btn-primary-outline': (query.time=='years' && query.value != 10) }" ng-click="changeQuery('years', 10)">
                                    10 {{ 'YEARS' | translate }}
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
                <br>
            </div>
        </div>
    </div>

    <!-- 3rd Tab: Realtime -->
    <div class="row" ng-if="tab==3">
        <div class="col-md-12">
            <div class="card">

                <!-- 2nd Linechart -->
                <div class="linechart" ng-if="data_2.dataset.length > 0">
                    <linechart data="data_2" options="options_2" height="390px"></linechart>
                </div>
                <div class="linechart" ng-if="data_2.dataset.length == 0">
                    <div style="height: 390px; line-height:390px; text-align: center;">
                        - {{ 'NO' | translate}} {{ 'MEASUREMENTS' | translate}} {{ 'FOUND' | translate}}-
                    </div>
                </div>
                <br>
                <br>
            </div>
        </div>
    </div>

</div>

<!-- MAP-RESIZER -->
<script>
    $('#map_2').height($('#details').height() - 174);
</script>
